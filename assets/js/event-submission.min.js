jQuery(document).ready(function(i){function e(){if(t()){i(this).find("input[type=submit]").blur();var e=i(".select2-search__field")[0];return e.setCustomValidity(event_manager_event_submission.i18n_required_field),e.reportValidity(),!0}if(s()){i(this).find("input[type=submit]").blur();var n=i("#event_description");return n.css({height:1,resize:"none",padding:0}),n.show(),n[0].setCustomValidity(event_manager_event_submission.i18n_required_field),n[0].reportValidity(),!0}return!1}function t(){var e=i("#event_category");return e.length&&!e.val()&&e.parent().hasClass("required-field")&&e.next().hasClass("select2")}function s(){if(!n())return!1;var e=tinymce.get("event_description").getContent(),t=i("#event_description");return 0===e.length&&t.parents(".required-field").length&&t.parents(".required-field").is(":visible")}function n(){return"undefined"!=typeof tinymce&&null!=tinymce.get("event_description")}i(document.body).on("click",".event-manager-remove-uploaded-file",function(){var e=i(this).closest(".fieldset-type-file").find("input[type=file][multiple][data-file_limit]");return i(this).closest(".event-manager-uploaded-file").remove(),e.trigger("update_status"),!1}),i(document.body).on("update_status",".fieldset-type-file input[type=file][multiple][data-file_limit]",function(){var e=parseInt(i(this).data("file_limit"),10)-parseInt(i(this).siblings(".event-manager-uploaded-files").first().children(".event-manager-uploaded-file").length,10);e>0?i(this).prop("disabled",!1):i(this).prop("disabled",!0),i(this).data("file_limit_left",e)}),i(document.body).on("change",".fieldset-type-file input[type=file][multiple][data-file_limit]",function(){var e=parseInt(i(this).data("file_limit"),10),t=e-parseInt(i(this).siblings(".event-manager-uploaded-files").first().children(".event-manager-uploaded-file").length,10),s=i(this).get(0);if(void 0!==s.files){var n=parseInt(s.files.length,10);if(e&&n>t){var a=event_manager_event_submission.i18n_over_upload_limit;i(this).data("file_limit_message")&&"string"==typeof i(this).data("file_limit_message")&&(a=i(this).data("file_limit_message")),a=a.replace("%d",e),s.setCustomValidity(a)}else s.setCustomValidity("");s.reportValidity()}return!0}),i(".fieldset-type-file input[type=file][multiple][data-file_limit]").trigger("update_status"),i(document.body).on("click","#submit-event-form .button.save_draft",function(){var e=i(this).closest("#submit-event-form"),t=!0;return e.addClass("disable-validation"),setTimeout(function(){e.removeClass("disable-validation")},1e3),e.find("div.draft-required input[required]").each(function(){if(i(this).get(0).reportValidity(),i(this).is(":invalid"))return t=!1,!1}),t}),i(document.body).on("submit",".event-manager-form",function(t){i(this).hasClass("disable-validation")||!e()?i(this).hasClass("prevent-spinner-behavior")||(i(this).find(".spinner").addClass("is-active"),i(this).find("input[type=submit]").addClass("disabled").on("click",function(){return!1})):t.preventDefault()}),i("#event_category").on("select2:select",function(){var e=i(".select2-search__field")[0];e.setCustomValidity(""),e.reportValidity()}),setTimeout(function(){n()&&tinymce.get("event_description").on("Change",function(){var e=i("#event_description");e.hide(),e[0].setCustomValidity(""),e[0].reportValidity()})},1e3)});